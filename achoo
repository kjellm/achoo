#!/usr/bin/env ruby

require 'achoo'

def main
  trap("INT") {puts; exit} # Print a newline in case we are prompting
  load_rc
  achoo = Achoo.new
  achoo.start
end

def load_rc
  rc_file = "#{ENV['HOME']}/.achoo"

  # FIX test
  if File.stat(rc_file).mode != 0100600
    warn "Insecure permissions on #{rc_file}"
    exit 1
  end

  load rc_file
end

main
